{"version":3,"sources":["components/useIsMountedRef.js","managementView/CalendarView/Toolbar.js","managementView/CalendarView/AddEditEventModal/AddEditEventForm.js","managementView/CalendarView/AddEditEventModal/index.js","managementView/CalendarView/index.js"],"names":["useIsMountedRef","isMounted","useRef","useEffect","current","useStyles","makeStyles","theme","root","monthGrid","breakpoints","up","flex","Toolbar","date","onDatePrev","view","onDateNext","onDateToday","onEventAdd","onViewChange","className","rest","classes","Grid","clsx","alignItems","container","justify","spacing","item","ButtonGroup","size","Button","onClick","Typography","variant","color","moment","format","display","justifyContent","messageWidth","maxWidth","AddEditEventForm","event","mode","onCancel","onAdd","onDelete","onEdit","Box","p","align","gutterBottom","name","email","mt","subject","message","title","start","Divider","flexGrow","disableElevation","defaultProps","AddEditEventModal","open","Dialog","fullWidth","onClose","backgroundColor","palette","background","dark","paddingTop","paddingBottom","calendar","borderColor","divider","colors","blue","default","typography","body2","body1","h6","subtitle2","fontWeight","fontWeightMedium","text","secondary","padding","primary","main","contrastText","borderWidth","opacity","subtitle1","CalendarView","calendarRef","isMountedRef","useTheme","useState","setView","toDate","setDate","events","setEvents","modal","setModal","getEvents","useCallback","arr","axios","get","then","response","data","map","info","st","time","push","id","service","resetModal","Page","Container","calendarEl","calendarApi","getApi","next","getDate","prev","today","newView","changeView","Paper","component","allDayMaintainDuration","defaultDate","defaultView","droppable","editable","eventClick","arg","find","e","parseInt","eventDrop","prevEvents","prevEvent","allDay","end","eventLimit","eventResizableFromStart","eventResize","timeFormat","header","height","ref","rerenderDelay","selectable","weekends","plugins","dayGridPlugin","timeGridPlugin","interactionPlugin","listPlugin","timelinePlugin","eventId","filter"],"mappings":"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","file":"static/js/6.60ab142e.chunk.js","sourcesContent":["import { useRef, useEffect } from 'react';\n\nexport default function useIsMountedRef() {\n  const isMounted = useRef(true);\n\n  useEffect(() => () => {\n    isMounted.current = false;\n  }, []);\n\n  return isMounted;\n}\n","import React from \"react\";\nimport clsx from \"clsx\";\nimport moment from \"moment\";\nimport PropTypes from \"prop-types\";\nimport {\n  Button,\n  ButtonGroup,\n  Grid,\n  Typography,\n  makeStyles,\n} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  monthGrid: {\n    [theme.breakpoints.up(\"md\")]: {\n      flex: \"0 0 55%\",\n    },\n  },\n}));\n\nfunction Toolbar({\n  date,\n  view,\n  onDatePrev,\n  onDateNext,\n  onEventAdd,\n  onViewChange,\n  onDateToday,\n  className,\n  ...rest\n}) {\n  const classes = useStyles();\n\n  return (\n    <Grid\n      className={clsx(classes.root, className)}\n      {...rest}\n      alignItems=\"center\"\n      container\n      justify=\"space-between\"\n      spacing={3}\n    >\n      <Grid item>\n        <ButtonGroup size=\"small\">\n          <Button onClick={onDatePrev}>Prev</Button>\n          <Button onClick={onDateToday}>Today</Button>\n          <Button onClick={onDateNext}>Next</Button>\n        </ButtonGroup>\n      </Grid>\n\n      <Grid item className={classes.monthGrid}>\n        <Typography variant=\"h3\" color=\"textPrimary\">\n          {moment(date).format(\"MMMM YYYY\")}\n        </Typography>\n      </Grid>\n    </Grid>\n  );\n}\n\nToolbar.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  date: PropTypes.any.isRequired,\n  onDateNext: PropTypes.func,\n  onDatePrev: PropTypes.func,\n  onDateToday: PropTypes.func,\n  onEventAdd: PropTypes.func,\n  onViewChange: PropTypes.func,\n  view: PropTypes.string.isRequired,\n};\n\nexport default Toolbar;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport moment from \"moment\";\nimport {\n  Box,\n  Typography,\n  Button,\n  Divider,\n  makeStyles,\n} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  container: {\n    display: \"flex\",\n    justifyContent: \"space-around\",\n    alignItems: \"baseline\",\n  },\n  messageWidth: {\n    maxWidth: 280,\n  },\n}));\n\nfunction AddEditEventForm({ event, mode, onAdd, onCancel, onDelete, onEdit }) {\n  const classes = useStyles();\n  return (\n    <div>\n      <Box p={3}>\n        <Typography\n          align=\"center\"\n          gutterBottom\n          variant=\"h3\"\n          color=\"textPrimary\"\n        >\n          {mode === \"add\" ? \"Add Event\" : \"Event Info\"}\n        </Typography>\n      </Box>\n      <Box p={3} className={classes.container}>\n        <Box>\n          <Typography variant=\"h4\">{event.name}</Typography>\n          <Box>\n            <Typography variant=\"body2\">{event.email}</Typography>\n          </Box>\n          <Box mt={2}>\n            <Typography variant=\"h6\">Subject</Typography>\n          </Box>\n          <Box>\n            <Typography variant=\"body2\">{event.subject}</Typography>\n          </Box>\n          <Box mt={2}>\n            <Typography variant=\"h6\">Message</Typography>\n          </Box>\n          <Box>\n            <Typography variant=\"body2\" className={classes.messageWidth}>\n              {event.message}\n            </Typography>\n          </Box>\n        </Box>\n        <Box>\n          <Box mt={2}>\n            <Typography variant=\"h5\">{event.title}</Typography>\n          </Box>\n          <Box>\n            <Typography variant=\"body1\">\n              {moment(event.date, \"YYYY-MM-DD\").format(\"dddd MMM Do, YYYY\")}\n            </Typography>\n          </Box>\n          <Box>\n            <Typography variant=\"body1\">\n              {moment(event.start).format(\"hh:mm a\")}\n            </Typography>\n          </Box>\n        </Box>\n      </Box>\n\n      <Divider />\n      <Box p={2} display=\"flex\" alignItems=\"center\">\n        <Box flexGrow={1} />\n        <Button\n          onClick={onCancel}\n          color=\"primary\"\n          variant=\"contained\"\n          disableElevation\n        >\n          Close\n        </Button>\n      </Box>\n    </div>\n  );\n}\n\nAddEditEventForm.propTypes = {\n  event: PropTypes.object,\n  mode: PropTypes.oneOf([\"add\", \"edit\"]).isRequired,\n  onAdd: PropTypes.func,\n  onCancel: PropTypes.func,\n  onDelete: PropTypes.func,\n  onEdit: PropTypes.func,\n};\n\nAddEditEventForm.defaultProps = {\n  event: {},\n  onAdd: () => {},\n  onCancel: () => {},\n  onDelete: () => {},\n  onEdit: () => {},\n};\n\nexport default AddEditEventForm;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Dialog } from '@material-ui/core';\nimport AddEditEventForm from './AddEditEventForm';\n\nfunction AddEditEventModal({\n  event,\n  mode,\n  onAdd,\n  onCancel,\n  onDelete,\n  onEdit,\n  open,\n  ...rest\n}) {\n  return (\n    <Dialog\n      maxWidth=\"sm\"\n      fullWidth\n      onClose={onCancel}\n      open={open}\n      {...rest}\n    >\n      {/* Dialog renders its body even if not open */}\n      {open && (\n        <AddEditEventForm\n          event={event}\n          mode={mode}\n          onAdd={onAdd}\n          onCancel={onCancel}\n          onDelete={onDelete}\n          onEdit={onEdit}\n        />\n      )}\n    </Dialog>\n  );\n}\n\nAddEditEventModal.propTypes = {\n  event: PropTypes.object,\n  mode: PropTypes.oneOf(['add', 'edit']),\n  onAdd: PropTypes.func,\n  onCancel: PropTypes.func,\n  onDelete: PropTypes.func,\n  onEdit: PropTypes.func,\n  open: PropTypes.bool\n};\n\nAddEditEventModal.defaultProps = {\n  event: {},\n  onAdd: () => {},\n  onCancel: () => {},\n  onDelete: () => {},\n  onEdit: () => {},\n  open: false\n};\n\nexport default AddEditEventModal;\n","import React, { useCallback, useState, useRef, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport moment from \"moment\";\nimport FullCalendar from \"@fullcalendar/react\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport timeGridPlugin from \"@fullcalendar/timegrid\";\nimport interactionPlugin from \"@fullcalendar/interaction\";\nimport listPlugin from \"@fullcalendar/list\";\nimport timelinePlugin from \"@fullcalendar/timeline\";\nimport {\n  Box,\n  Container,\n  Paper,\n  useTheme,\n  makeStyles,\n  colors,\n} from \"@material-ui/core\";\nimport \"@fullcalendar/core/main.css\";\nimport \"@fullcalendar/daygrid/main.css\";\nimport \"@fullcalendar/timegrid/main.css\";\nimport \"@fullcalendar/list/main.css\";\nimport axios from \"axios\";\nimport useIsMountedRef from \"src/components/useIsMountedRef\";\nimport Page from \"src/components/Page\";\nimport Toolbar from \"./Toolbar\";\nimport AddEditEventModal from \"./AddEditEventModal\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: theme.palette.background.dark,\n    // minHeight: \"100%\",\n    paddingTop: theme.spacing(3),\n    paddingBottom: theme.spacing(3),\n  },\n  calendar: {\n    \"& .fc-unthemed th\": {\n      borderColor: theme.palette.divider,\n    },\n    \"& .fc-unthemed td\": {\n      borderColor: theme.palette.divider,\n    },\n    \"& .fc-unthemed td.fc-today\": {\n      backgroundColor: colors.blue[50],\n    },\n    \"& .fc-head\": {\n      backgroundColor: theme.palette.background.dark,\n    },\n    \"& .fc-body\": {\n      backgroundColor: theme.palette.background.default,\n    },\n    \"& .fc-axis\": {\n      ...theme.typography.body2,\n    },\n    \"& .fc-list-item-time\": {\n      ...theme.typography.body2,\n    },\n    \"& .fc-list-item-title\": {\n      ...theme.typography.body1,\n    },\n    \"& .fc-list-heading-main\": {\n      ...theme.typography.h6,\n    },\n    \"& .fc-list-heading-alt\": {\n      ...theme.typography.h6,\n    },\n    \"& .fc th\": {\n      borderColor: theme.palette.divider,\n    },\n    \"& .fc-day-header\": {\n      ...theme.typography.subtitle2,\n      fontWeight: theme.typography.fontWeightMedium,\n      color: theme.palette.text.secondary,\n      padding: theme.spacing(1),\n      backgroundColor: theme.palette.background.dark,\n    },\n    \"& .fc-day-top\": {\n      ...theme.typography.body2,\n    },\n    \"& .fc-highlight\": {\n      backgroundColor: theme.palette.background.dark,\n    },\n    \"& .fc-event\": {\n      backgroundColor: theme.palette.primary.main,\n      color: theme.palette.secondary.contrastText,\n      borderWidth: 2,\n      opacity: 0.9,\n      \"& .fc-time\": {\n        ...theme.typography.h6,\n        color: \"inherit\",\n      },\n      \"& .fc-title\": {\n        ...theme.typography.body1,\n        color: \"inherit\",\n      },\n    },\n    \"& .fc-list-empty\": {\n      ...theme.typography.subtitle1,\n    },\n  },\n  container: {\n    padding: theme.spacing(0, 0, 10, 0),\n  },\n}));\n\nfunction CalendarView() {\n  const classes = useStyles();\n  const calendarRef = useRef(null);\n  const isMountedRef = useIsMountedRef();\n  const theme = useTheme();\n  const [view, setView] = useState(\"dayGridMonth\");\n  const [date, setDate] = useState(moment().toDate());\n  const [events, setEvents] = useState(null);\n  const [modal, setModal] = useState({\n    event: null,\n    mode: null,\n    open: false,\n  });\n\n  const getEvents = useCallback(() => {\n    var arr = [];\n    axios.get(\"/api/v1/events\").then((response) => {\n      if (isMountedRef.current) {\n        let data = response.data;\n        // '2010-01-01T14:30:00',\n        data.map((info) => {\n          let formatDay = moment(info.date, \"dddd MMM Do, YYYY\").format(\n            \"YYYY-MM-DD\"\n          );\n          let st = formatDay + \"T\" + info.time;\n          arr.push({\n            id: info.id,\n            name: info.name,\n            email: info.email,\n            message: info.message,\n            subject: info.subject,\n            date: moment(info.date, \"dddd MMM Do, YYYY\").format(\"YYYY-MM-DD\"),\n            start: st,\n            title: info.service,\n          });\n          return true;\n        });\n      }\n\n      setEvents(arr);\n    });\n  }, [isMountedRef]);\n\n  useEffect(() => {\n    getEvents();\n  }, [getEvents]);\n\n  const resetModal = () => {\n    setModal({\n      event: null,\n      mode: null,\n      open: false,\n    });\n  };\n\n  const handleDateToday = () => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n\n      calendarApi.today();\n      setDate(calendarApi.getDate());\n    }\n  };\n\n  const handleViewChange = (newView) => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n\n      calendarApi.changeView(newView);\n      setView(newView);\n    }\n  };\n\n  const handleDatePrev = () => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n\n      calendarApi.prev();\n      setDate(calendarApi.getDate());\n    }\n  };\n\n  const handleDateNext = () => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n\n      calendarApi.next();\n      setDate(calendarApi.getDate());\n    }\n  };\n\n  const handleEventDelete = (eventId) => {\n    setEvents((prevEvents) =>\n      prevEvents.filter((prevEvent) => prevEvent.id !== eventId)\n    );\n    resetModal();\n  };\n\n  const handleEventSelect = (arg) => {\n    const event = events.find((e) => e.id === parseInt(arg.event.id));\n\n    setModal({\n      event: { ...event },\n      mode: \"edit\",\n      open: true,\n    });\n  };\n\n  const handleEventEdit = (event) => {\n    setEvents((prevEvents) =>\n      prevEvents.map((prevEvent) =>\n        prevEvent.id === event.id ? event : prevEvent\n      )\n    );\n    resetModal();\n  };\n\n  const handleEventResize = ({ event }) => {\n    // Call API to update the event in database\n    setEvents((prevEvents) =>\n      prevEvents.map((prevEvent) =>\n        prevEvent.id === event.id\n          ? {\n              ...prevEvent,\n              allDay: event.allDay,\n              start: event.start,\n              end: event.end,\n            }\n          : prevEvent\n      )\n    );\n  };\n\n  const handleEventDrop = ({ event }) => {\n    // If you add a droppable area, check if event dropped inside or outside of calendar\n    // Call API to update the event in database\n    setEvents((prevEvents) =>\n      prevEvents.map((prevEvent) =>\n        prevEvent.id === event.id\n          ? {\n              ...prevEvent,\n              allDay: event.allDay,\n              start: event.start,\n              end: event.end,\n            }\n          : prevEvent\n      )\n    );\n  };\n\n  const handleModalClose = () => {\n    resetModal();\n  };\n\n  if (!events) {\n    return null;\n  }\n  return (\n    <Page className={classes.root} title=\"Calendar\">\n      <Container className={classes.container}>\n        <Toolbar\n          date={date}\n          onDateNext={handleDateNext}\n          onDatePrev={handleDatePrev}\n          onDateToday={handleDateToday}\n          onViewChange={handleViewChange}\n          view={view}\n        />\n        <Paper className={classes.calendar} component={Box} mt={3} p={2}>\n          <FullCalendar\n            allDayMaintainDuration\n            defaultDate={date}\n            defaultView={view}\n            droppable\n            editable\n            eventClick={handleEventSelect}\n            eventDrop={handleEventDrop}\n            eventLimit\n            eventResizableFromStart\n            eventResize={handleEventResize}\n            events={events}\n            timeFormat=\"h:mm\"\n            // eventRender={EventDetail}\n            header={false}\n            height={800}\n            ref={calendarRef}\n            rerenderDelay={10}\n            selectable\n            weekends\n            plugins={[\n              dayGridPlugin,\n              timeGridPlugin,\n              interactionPlugin,\n              listPlugin,\n              timelinePlugin,\n            ]}\n          />\n        </Paper>\n        <AddEditEventModal\n          event={modal.event}\n          mode={modal.mode}\n          onCancel={handleModalClose}\n          onDelete={handleEventDelete}\n          onEdit={handleEventEdit}\n          open={modal.open}\n        />\n      </Container>\n    </Page>\n  );\n}\n\nexport default CalendarView;\n"],"sourceRoot":""}